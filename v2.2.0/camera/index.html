<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Camera - Formula Student Driverless Simulator</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/version-select.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Camera";
        var mkdocs_page_input_path = "camera.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Formula Student Driverless Simulator
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Introduction</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../system-overview/">System overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../getting-started-with-ros/">Getting started with ROS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../getting-started-with-python/">Getting started with Python</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../custom-mapping/">Getting started with custom mapping</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Vehicle & Sensors</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../vehicle_model/">Vehicle model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../imu/">IMU</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../lidar/">Lidar</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Camera</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gps/">GPS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ground-speed-sensor/">GSS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">#tech-madness</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ros-bridge/">ROS Bridge</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../statistics/">ROS Bridge statistics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../joystick/">Joystick</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../docker_ubuntu/">Docker</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../coordinate-frames/">Coordinate frames</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../import-car-3d-model/">Import your 3d car model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../map-tutorial/">Making your own map in UE4</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gcp-remote-workstation/">Google cloud remote workstation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../software-install-instructions/">Software install instructions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../how-to-release/">How to release</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Competition tooling</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../operator/">Operator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../competition-signals/">System flow and signals</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../spectator/">Spectator</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Formula Student Driverless Simulator</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Vehicle & Sensors &raquo;</li>
      <li>Camera</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/FS-Driverless/Formula-Student-Driverless-Simulator/edit/master/docs/camera.md">Edit on FS-Driverless/Formula-Student-Driverless-Simulator</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="cameras">Cameras</h1>
<p>You know what camera's are.
There are two camera types:</p>
<ul>
<li>RGB camera captures color images, just like any normal normal video camera.</li>
<li>Depth Cameras (aka DepthPerspective) act as follows: each pixel is given a float value in meters corresponding to the smallest distance from the camera to that point. It captures the world in 3d!</li>
</ul>
<p>At the moment there is no added noise to the images.</p>
<h1 id="add-a-camera-to-the-car">Add a camera to the car</h1>
<p>To add a camera to your vehicle, add the following json to the <code>Cameras</code> map in your <code>settings.json</code>:</p>
<pre><code>&quot;Camera1&quot;: {
    &quot;CaptureSettings&quot;: [{
        &quot;ImageType&quot;: 0,
        &quot;Width&quot;: 785,
        &quot;Height&quot;: 785,
        &quot;FOV_Degrees&quot;: 90
    }],
    &quot;X&quot;: 1.0,
    &quot;Y&quot;: 0.06,
    &quot;Z&quot;: -2.20,
    &quot;Pitch&quot;: 0.0,
    &quot;Roll&quot;: 0.0,
    &quot;Yaw&quot;: 180
}
</code></pre>
<p><code>Camera1</code> is the name of the camera. 
This name will be used to reference the camera when collecing images.</p>
<p><code>X</code>, <code>Y</code> and <code>Z</code> are the position of the lidar relative the <a href="../vehicle_model/">vehicle pawn center</a> of the car in ENU frame.</p>
<p><code>Roll</code>,<code>Pitch</code> and <code>Yaw</code> are rotations in degrees.</p>
<p><code>ImageType</code> describes the type of camera. 
At this moment only rgb and depth cameras are supported.
For rgb camera, set this value to 0 and for depth camera set the value to 2.</p>
<p><code>FOV_Degrees</code> describes <a href="https://en.wikipedia.org/wiki/Field_of_view">how much the camera sees</a>.
The vertical FoV will be automatically calculated using the following formula: <code>vertical FoV = image height / image width * horizontal FoV</code>.</p>
<h2 id="python">Python</h2>
<pre><code class="language-python">&quot;&quot;&quot;
Args:
    requests (list[ImageRequest]): Images required
    vehicle_name (str, optional): Name of vehicle associated with the camera

Returns:
    list[ImageResponse]
&quot;&quot;&quot;
[image] = client.simGetImages([fsds.ImageRequest()], vehicle_name = 'FSCar')

# For color images:
[image] = client.simGetImages([fsds.ImageRequest(camera_name = 'Camera1', image_type = fsds.ImageType.Scene, pixels_as_float = False, compress = False)], vehicle_name = 'FSCar')

# For depth images images:
[image] = client.simGetImages([fsds.ImageRequest(camera_name = 'Camera1', image_type = fsds.ImageType.DepthPerspective, pixels_as_float = True, compress = False)], vehicle_name = 'FSCar')
</code></pre>
<p>The API simGetImages can accept request for multiple image types from any cameras in single call. 
You can specify if image is png compressed, RGB uncompressed or float array. 
For png compressed images, you get binary string literal.
For float array you get Python list of float64. </p>
<p>See <a href="https://github.com/FS-Driverless/Formula-Student-Driverless-Simulator/tree/master/python/examples/camera_color_png.py">this file</a> with an example on how get acolor image and write it to a file.
<a href="https://github.com/FS-Driverless/Formula-Student-Driverless-Simulator/issues/240">Do you want to hep with writing more examples?</a></p>
<h2 id="ros">ROS</h2>
<p>When using the ROS bridge, images are published on the <code>/fsds/camera/CAMERA_NAME</code> topic, where <code>CAMERA_NAME</code> will be replaced by the name defined in the <code>settings.json</code>.
Every camera specified in the <code>settings.json</code> file get's its own topic. </p>
<p>The message type is <a href="https://docs.ros.org/api/sensor_msgs/html/msg/Image.html">sensor_msgs/Image</a>.
The encoding of the image data is <code>bgra8</code> for color images and <code>32FC1</code> for depth images.</p>
<p>The ROS bridge regularly publishes static <a href="http://wiki.ros.org/tf">transforms</a> between the <code>fsds/FSCar</code> frame and every camera.
Naming of the camera frames is <code>fsds/CAMERA_NAME</code>.
For example, the position and orientation of a camera named <code>Test</code> will become available in the frame <code>/fsds/Test</code>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../lidar/" class="btn btn-neutral float-left" title="Lidar"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../gps/" class="btn btn-neutral float-right" title="GPS">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>GPLv2</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../lidar/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../gps/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
      <script src="../js/version-select.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
